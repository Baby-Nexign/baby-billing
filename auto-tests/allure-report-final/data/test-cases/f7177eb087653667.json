{"uid":"f7177eb087653667","name":"Тест: BRT отклоняет CDR с невалидными значениями callType","fullName":"tests.test_invalid_call_type#test_brt_rejects_cdr_with_invalid_call_type","historyId":"098a842cfef92df2991cc6cf13c8a532","time":{"start":1746967605029,"stop":1746967610079,"duration":5050},"description":"Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный 'callType'. Используется файл: test_data/invalid_call_types.jsonl. Ожидается 0 записей в БД.","descriptionHtml":"<p>Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный 'callType'. Используется файл: test_data/invalid_call_types.jsonl. Ожидается 0 записей в БД.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"db_connection","time":{"start":1746967604997,"stop":1746967605028,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный 'callType'. Используется файл: test_data/invalid_call_types.jsonl. Ожидается 0 записей в БД.","status":"passed","steps":[{"name":"1. Подготовка БД: создание/проверка абонентов ['79123456789', '79996667755', '79334455667'] и очистка cdr_record","time":{"start":1746967605029,"stop":1746967605051,"duration":22},"status":"passed","steps":[],"attachments":[{"uid":"18569f597e0d059a","name":"ID подготовленных/проверенных абонентов","source":"18569f597e0d059a.json","type":"application/json","size":62}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"2. Чтение CDR с невалидными callType из файла: test_data/invalid_call_types.jsonl","time":{"start":1746967605051,"stop":1746967605053,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"8d4862ea9e95508","name":"Содержимое файла test_data/invalid_call_types.jsonl (с невалидными callType)","source":"8d4862ea9e95508.json","type":"application/json","size":793}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"3. Отправка 4 CDR (с невалидным callType) в RabbitMQ","time":{"start":1746967605054,"stop":1746967605068,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"30f4f6b880eaa215","name":"CDRы (с невалидным callType), отправленные в RabbitMQ","source":"30f4f6b880eaa215.json","type":"application/json","size":793}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"4. Ожидание 5 сек. для обработки CDR сервисом BRT","time":{"start":1746967605068,"stop":1746967610070,"duration":5002},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"5. Проверка отсутствия записей в таблице cdr_record (ожидается: 0)","time":{"start":1746967610070,"stop":1746967610078,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"9821feaed5a18454","name":"Сводка по записям в БД","source":"9821feaed5a18454.txt","type":"text/plain","size":90}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"4de433cd2a63ba11","name":"Ожидаемое количество записей в БД после обработки","source":"4de433cd2a63ba11.txt","type":"text/plain","size":1},{"uid":"bb03b3489d83bb9e","name":"log","source":"bb03b3489d83bb9e.txt","type":"text/plain","size":5277},{"uid":"58beb655ff507d31","name":"stderr","source":"58beb655ff507d31.txt","type":"text/plain","size":5077}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"db_connection::0","time":{"start":1746967610080,"stop":1746967610084,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"severity","value":"critical"},{"name":"feature","value":"Негативные сценарии - Валидация данных"},{"name":"epic","value":"Обработка CDR в BRT"},{"name":"story","value":"Отклонение CDR с невалидным callType"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_invalid_call_type"},{"name":"host","value":"imenov"},{"name":"thread","value":"32580-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_invalid_call_type"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[],"tags":[]},"source":"f7177eb087653667.json","parameterValues":[]}