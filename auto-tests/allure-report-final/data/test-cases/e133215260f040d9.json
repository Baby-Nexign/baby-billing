{"uid":"e133215260f040d9","name":"Проверка списания средств при внутрисетевом звонке на тарифе 'Классика'","fullName":"tests.test_e2e_classic_01#test_e2e_classic_01","historyId":"5b6655674052fb4cdb7bdce82a6ada02","time":{"start":1746919820689,"stop":1746919825722,"duration":5033},"description":"\n    Тест проверяет корректность списания средств у звонящего абонента\n    и неизменность баланса у принимающего абонента при внутрисетевом звонке\n    на тарифном плане 'Классика'.\n    Шаги:\n    1. Создание/обновление данных звонящего и принимающего абонентов.\n    2. Отправка CDR о звонке в RabbitMQ.\n    3. Расчет ожидаемой стоимости звонка.\n    4. Проверка баланса звонящего абонента после биллинга.\n    5. Проверка баланса принимающего абонента (не должен измениться).\n","descriptionHtml":"<pre><code>Тест проверяет корректность списания средств у звонящего абонента\nи неизменность баланса у принимающего абонента при внутрисетевом звонке\nна тарифном плане 'Классика'.\nШаги:\n1. Создание/обновление данных звонящего и принимающего абонентов.\n2. Отправка CDR о звонке в RabbitMQ.\n3. Расчет ожидаемой стоимости звонка.\n4. Проверка баланса звонящего абонента после биллинга.\n5. Проверка баланса принимающего абонента (не должен измениться).\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"reset_sequences_after_migrations","time":{"start":1746919820654,"stop":1746919820676,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"db_connection","time":{"start":1746919820676,"stop":1746919820688,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Тест проверяет корректность списания средств у звонящего абонента\n    и неизменность баланса у принимающего абонента при внутрисетевом звонке\n    на тарифном плане 'Классика'.\n    Шаги:\n    1. Создание/обновление данных звонящего и принимающего абонентов.\n    2. Отправка CDR о звонке в RabbitMQ.\n    3. Расчет ожидаемой стоимости звонка.\n    4. Проверка баланса звонящего абонента после биллинга.\n    5. Проверка баланса принимающего абонента (не должен измениться).\n","status":"passed","steps":[{"name":"1. Подготовка данных абонентов (звонящий и принимающий)","time":{"start":1746919820689,"stop":1746919820701,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"b0591f29e8eb91d7","name":"Данные звонящего абонента (вход)","source":"b0591f29e8eb91d7.json","type":"application/json","size":203},{"uid":"ae03ec6d835ecb7c","name":"Данные принимающего абонента (вход)","source":"ae03ec6d835ecb7c.json","type":"application/json","size":203}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"2. Отправка CDR: 79111111111 -> 79333333333, Начало: 2025-05-01T10:00:00, Конец: 2025-05-01T10:03:45","time":{"start":1746919820701,"stop":1746919820711,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"279861a84aed12fe","name":"Отправляемый CDR","source":"279861a84aed12fe.json","type":"application/json","size":171}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"3. Расчет ожидаемой стоимости звонка","time":{"start":1746919820711,"stop":1746919820712,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"163c1dbf92eddd38","name":"Расчет минут","source":"163c1dbf92eddd38.txt","type":"text/plain","size":57},{"uid":"2385e1641a52dfdf","name":"Расчет стоимости","source":"2385e1641a52dfdf.txt","type":"text/plain","size":113}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Пауза 5 сек. для обработки биллинга","time":{"start":1746919820712,"stop":1746919825712,"duration":5000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"4. Проверка баланса звонящего абонента (79111111111)","time":{"start":1746919825712,"stop":1746919825717,"duration":5},"status":"passed","steps":[],"attachments":[{"uid":"f23fe2b1323e4f03","name":"Детали баланса 79111111111","source":"f23fe2b1323e4f03.txt","type":"text/plain","size":124}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"5. Проверка баланса принимающего абонента (79333333333)","time":{"start":1746919825717,"stop":1746919825720,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"766c25df4b52bf3f","name":"Детали баланса 79333333333","source":"766c25df4b52bf3f.txt","type":"text/plain","size":144}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"7f6423bb59359da3","name":"log","source":"7f6423bb59359da3.txt","type":"text/plain","size":1668},{"uid":"5e0d083cede83943","name":"stdout","source":"5e0d083cede83943.txt","type":"text/plain","size":214},{"uid":"a7129bc64c2a113","name":"stderr","source":"a7129bc64c2a113.txt","type":"text/plain","size":1644}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":10,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"db_connection::0","time":{"start":1746919825723,"stop":1746919825725,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Тариф 'Классика'"},{"name":"severity","value":"critical"},{"name":"story","value":"E2E-CLASSIC-01: Внутрисетевой исходящий звонок, корректное списание"},{"name":"epic","value":"Биллинг"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_e2e_classic_01"},{"name":"host","value":"imenov"},{"name":"thread","value":"330609-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_e2e_classic_01"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[],"tags":[]},"source":"e133215260f040d9.json","parameterValues":[]}