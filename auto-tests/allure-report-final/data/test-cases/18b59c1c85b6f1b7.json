{"uid":"18b59c1c85b6f1b7","name":"Проверка списания средств при звонке на внешнего оператора (ТП 'Классика')","fullName":"tests.test_e2e_classic_02#test_e2e_classic_02_external_call_debiting","historyId":"ed9befe87d64b6c89e3aecb8e615b3ff","time":{"start":1746919825766,"stop":1746919830816,"duration":5050},"description":"\n    Тест проверяет корректность списания средств у звонящего абонента\n    при исходящем звонке на номер другого (внешнего) оператора\n    для тарифного плана 'Классика'.\n    Шаги:\n    1. Создание/обновление данных звонящего абонента.\n    2. Отправка CDR о звонке на внешний номер в RabbitMQ.\n    3. Расчет ожидаемой стоимости звонка по тарифу для внешних вызовов.\n    4. Проверка баланса звонящего абонента после биллинга.\n","descriptionHtml":"<pre><code>Тест проверяет корректность списания средств у звонящего абонента\nпри исходящем звонке на номер другого (внешнего) оператора\nдля тарифного плана 'Классика'.\nШаги:\n1. Создание/обновление данных звонящего абонента.\n2. Отправка CDR о звонке на внешний номер в RabbitMQ.\n3. Расчет ожидаемой стоимости звонка по тарифу для внешних вызовов.\n4. Проверка баланса звонящего абонента после биллинга.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"reset_sequences_after_migrations","time":{"start":1746919820654,"stop":1746919820676,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"db_connection","time":{"start":1746919825739,"stop":1746919825765,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Тест проверяет корректность списания средств у звонящего абонента\n    при исходящем звонке на номер другого (внешнего) оператора\n    для тарифного плана 'Классика'.\n    Шаги:\n    1. Создание/обновление данных звонящего абонента.\n    2. Отправка CDR о звонке на внешний номер в RabbitMQ.\n    3. Расчет ожидаемой стоимости звонка по тарифу для внешних вызовов.\n    4. Проверка баланса звонящего абонента после биллинга.\n","status":"passed","steps":[{"name":"1. Подготовка данных звонящего абонента","time":{"start":1746919825766,"stop":1746919825793,"duration":27},"status":"passed","steps":[],"attachments":[{"uid":"9c74263d78a1a63c","name":"Данные звонящего (вход)","source":"9c74263d78a1a63c.json","type":"application/json","size":203}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"2. Отправка CDR: 79111111111 -> 79888888888 (внешний), Начало: 2025-05-01T11:00:00, Конец: 2025-05-01T11:01:10","time":{"start":1746919825793,"stop":1746919825808,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"e53981df771c309a","name":"Отправляемый CDR (внешний звонок)","source":"e53981df771c309a.json","type":"application/json","size":171}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"3. Расчет ожидаемой стоимости звонка (внешний оператор)","time":{"start":1746919825808,"stop":1746919825808,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"a0cef8c5946300a","name":"Расчет минут","source":"a0cef8c5946300a.txt","type":"text/plain","size":57},{"uid":"2ec2b096893a541e","name":"Расчет стоимости","source":"2ec2b096893a541e.txt","type":"text/plain","size":107}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Пауза 5 сек. для обработки биллинга","time":{"start":1746919825808,"stop":1746919830809,"duration":5001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"4. Проверка баланса звонящего абонента (79111111111) после внешнего звонка","time":{"start":1746919830809,"stop":1746919830814,"duration":5},"status":"passed","steps":[],"attachments":[{"uid":"65b2f0f3d93c71bb","name":"Детали баланса 79111111111","source":"65b2f0f3d93c71bb.txt","type":"text/plain","size":153}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"49f9527048e85c60","name":"log","source":"49f9527048e85c60.txt","type":"text/plain","size":1142},{"uid":"b0f12f1010fb4c97","name":"stderr","source":"b0f12f1010fb4c97.txt","type":"text/plain","size":1124}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"db_connection::0","time":{"start":1746919830817,"stop":1746919830820,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"story","value":"E2E-CLASSIC-02: Исходящий звонок на другого оператора, корректное списание"},{"name":"feature","value":"Тариф 'Классика'"},{"name":"severity","value":"critical"},{"name":"epic","value":"Биллинг"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_e2e_classic_02"},{"name":"host","value":"imenov"},{"name":"thread","value":"330609-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_e2e_classic_02"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[],"tags":[]},"source":"18b59c1c85b6f1b7.json","parameterValues":[]}