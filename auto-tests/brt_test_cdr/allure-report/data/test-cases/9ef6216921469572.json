{"uid":"9ef6216921469572","name":"Тест: BRT отклоняет CDR с невалидными форматами или значениями дат","fullName":"tests.test_invalid_date#test_brt_rejects_cdr_with_invalid_date_formats","historyId":"cd4f5faccc9150cdd89584d37b2967f7","time":{"start":1746967610127,"stop":1746967615162,"duration":5035},"description":"Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный формат или значение для 'callStart' или 'callEnd'. Используется файл: test_data/invalid_dates.jsonl. Ожидается 0 записей в БД.","descriptionHtml":"<p>Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный формат или значение для 'callStart' или 'callEnd'. Используется файл: test_data/invalid_dates.jsonl. Ожидается 0 записей в БД.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"db_connection","time":{"start":1746967610090,"stop":1746967610126,"duration":36},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный формат или значение для 'callStart' или 'callEnd'. Используется файл: test_data/invalid_dates.jsonl. Ожидается 0 записей в БД.","status":"passed","steps":[{"name":"1. Подготовка БД: создание/проверка абонентов ['79123456789', '79996667755', '79334455667'] и очистка cdr_record","time":{"start":1746967610127,"stop":1746967610140,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"2b54e81ce22efc48","name":"ID подготовленных/проверенных абонентов","source":"2b54e81ce22efc48.json","type":"application/json","size":62}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"2. Чтение CDR с невалидными датами из файла: test_data/invalid_dates.jsonl и проверка консистентности тестовых данных","time":{"start":1746967610140,"stop":1746967610142,"duration":2},"status":"passed","steps":[{"name":"2.1 Проверка, что firstSubscriberMsisdn в тестовом файле соответствует подготовленным в БД","time":{"start":1746967610142,"stop":1746967610142,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"c26cebc7f09292ac","name":"Результат проверки firstSubscriberMsisdn","source":"c26cebc7f09292ac.txt","type":"text/plain","size":99}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"a2aa0eaf65dfbdd3","name":"Содержимое файла test_data/invalid_dates.jsonl (с невалидными датами)","source":"a2aa0eaf65dfbdd3.json","type":"application/json","size":1341}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"3. Отправка 7 CDR (с невалидными датами) в RabbitMQ","time":{"start":1746967610142,"stop":1746967610152,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"47fde77f9c2b3e99","name":"CDRы (с невалидными датами), отправленные в RabbitMQ","source":"47fde77f9c2b3e99.json","type":"application/json","size":1341}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"4. Ожидание 5 сек. для обработки CDR сервисом BRT","time":{"start":1746967610152,"stop":1746967615153,"duration":5001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"5. Проверка отсутствия записей в таблице cdr_record (ожидается: 0)","time":{"start":1746967615153,"stop":1746967615161,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"8e1da30aa56c5870","name":"Сводка по записям в БД","source":"8e1da30aa56c5870.txt","type":"text/plain","size":90}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"c3fbe52e7db1f700","name":"Ожидаемое количество записей в БД после обработки","source":"c3fbe52e7db1f700.txt","type":"text/plain","size":1},{"uid":"ea3217a9da200879","name":"log","source":"ea3217a9da200879.txt","type":"text/plain","size":5191},{"uid":"b7721d21c490d572","name":"stderr","source":"b7721d21c490d572.txt","type":"text/plain","size":5041}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":8,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"db_connection::0","time":{"start":1746967615164,"stop":1746967615167,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"severity","value":"critical"},{"name":"story","value":"Отклонение CDR с невалидными датами"},{"name":"epic","value":"Обработка CDR в BRT"},{"name":"feature","value":"Негативные сценарии - Валидация данных"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_invalid_date"},{"name":"host","value":"imenov"},{"name":"thread","value":"32580-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_invalid_date"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[],"tags":[]},"source":"9ef6216921469572.json","parameterValues":[]}