{"name": "Тест: BRT отклоняет CDR с невалидными форматами или значениями дат", "status": "passed", "description": "Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный формат или значение для 'callStart' или 'callEnd'. Используется файл: test_data/invalid_dates.jsonl. Ожидается 0 записей в БД.", "steps": [{"name": "1. Подготовка БД: создание/проверка абонентов ['79123456789', '79996667755', '79334455667'] и очистка cdr_record", "status": "passed", "attachments": [{"name": "ID подготовленных/проверенных абонентов", "source": "6514ebcc-133d-48fd-8145-07db5cb89c08-attachment.json", "type": "application/json"}], "start": 1746967610127, "stop": 1746967610140}, {"name": "2. Чтение CDR с невалидными датами из файла: test_data/invalid_dates.jsonl и проверка консистентности тестовых данных", "status": "passed", "steps": [{"name": "2.1 Проверка, что firstSubscriberMsisdn в тестовом файле соответствует подготовленным в БД", "status": "passed", "attachments": [{"name": "Результат проверки firstSubscriberMsisdn", "source": "2d47fe25-75b0-4dea-bebf-a443a99b31fe-attachment.txt", "type": "text/plain"}], "start": 1746967610142, "stop": 1746967610142}], "attachments": [{"name": "Содержимое файла test_data/invalid_dates.jsonl (с невалидными датами)", "source": "64d70237-8f34-4f64-89c8-9f4565c39d3d-attachment.json", "type": "application/json"}], "start": 1746967610140, "stop": 1746967610142}, {"name": "3. Отправка 7 CDR (с невалидными датами) в RabbitMQ", "status": "passed", "attachments": [{"name": "CDRы (с невалидными датами), отправленные в RabbitMQ", "source": "234ffaa3-91d9-44ed-9241-81a27d3ab65b-attachment.json", "type": "application/json"}], "start": 1746967610142, "stop": 1746967610152}, {"name": "4. Ожидание 5 сек. для обработки CDR сервисом BRT", "status": "passed", "start": 1746967610152, "stop": 1746967615153}, {"name": "5. Проверка отсутствия записей в таблице cdr_record (ожидается: 0)", "status": "passed", "attachments": [{"name": "Сводка по записям в БД", "source": "15b41128-07fb-4a66-8b0d-b85465d3705e-attachment.txt", "type": "text/plain"}], "start": 1746967615153, "stop": 1746967615161}], "attachments": [{"name": "Ожидаемое количество записей в БД после обработки", "source": "deac7447-94bc-4db0-b759-72a266e98a90-attachment.txt", "type": "text/plain"}, {"name": "log", "source": "f08d7805-da78-427e-a7d1-e2d2990a64fe-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "89eb0bc9-946d-4669-9d1b-0a3fa1dad189-attachment.txt", "type": "text/plain"}], "start": 1746967610127, "stop": 1746967615162, "uuid": "4042419d-2426-4029-bec7-00c09d546414", "historyId": "cd4f5faccc9150cdd89584d37b2967f7", "testCaseId": "cd4f5faccc9150cdd89584d37b2967f7", "fullName": "tests.test_invalid_date#test_brt_rejects_cdr_with_invalid_date_formats", "labels": [{"name": "severity", "value": "critical"}, {"name": "story", "value": "Отклонение CDR с невалидными датами"}, {"name": "epic", "value": "Обработка CDR в BRT"}, {"name": "feature", "value": "Негативные сценарии - Валидация данных"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_invalid_date"}, {"name": "host", "value": "imenov"}, {"name": "thread", "value": "32580-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_invalid_date"}]}