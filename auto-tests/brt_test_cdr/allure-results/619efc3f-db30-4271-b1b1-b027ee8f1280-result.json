{"name": "Тест: BRT не сохраняет CDR, если оба абонента внешние", "status": "passed", "description": "Проверяет, что файл CDR, содержащий только звонки между внешними (неизвестными BRT) номерами, не приводит к созданию записей в БД. Используется файл: test_data/all_external_cdr.jsonl.", "steps": [{"name": "1. Подготовка БД: очистка cdr_record и проверка наличия 'внутренних' абонентов (['79123456789', '79996667755', '79334455667'])", "status": "passed", "attachments": [{"name": "ID подготовленных/проверенных 'внутренних' абонентов", "source": "4f1b239d-113a-43a5-9f79-782f20f70376-attachment.json", "type": "application/json"}], "start": 1746967599950, "stop": 1746967599964}, {"name": "2. Чтение CDR (только внешние номера) из файла: test_data/all_external_cdr.jsonl", "status": "passed", "attachments": [{"name": "Содержимое файла test_data/all_external_cdr.jsonl (внешние номера)", "source": "e6c211e8-017b-4501-a583-73427a5ca93f-attachment.json", "type": "application/json"}, {"name": "Информация о прочитанном файле", "source": "68b8583b-a782-4846-910b-81adcded1300-attachment.txt", "type": "text/plain"}], "start": 1746967599964, "stop": 1746967599965}, {"name": "3. Отправка 10 CDR (внешние номера) в RabbitMQ", "status": "passed", "attachments": [{"name": "CDRы (внешние номера), отправленные в RabbitMQ", "source": "5a26c037-4dd4-424d-a3c4-efec5c4e2b5c-attachment.json", "type": "application/json"}], "start": 1746967599966, "stop": 1746967599977}, {"name": "4. Ожидание 5 секунд для обработки CDR сервисом BRT", "status": "passed", "start": 1746967599977, "stop": 1746967604978}, {"name": "5. Проверка отсутствия записей в таблице cdr_record (ожидается: 0)", "status": "passed", "attachments": [{"name": "Сводка по записям в БД", "source": "73256d4b-385e-4daa-aefa-38ab81c20d50-attachment.txt", "type": "text/plain"}], "start": 1746967604978, "stop": 1746967604984}], "attachments": [{"name": "Ожидаемое количество записей в БД после обработки", "source": "b9832045-6afb-407e-9d3a-62b0bff45038-attachment.txt", "type": "text/plain"}, {"name": "log", "source": "c74872fe-bd0f-4661-87d3-15cdf18b6d3a-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "6f05fe66-506e-4361-a2ba-dc4574588567-attachment.txt", "type": "text/plain"}], "start": 1746967599950, "stop": 1746967604985, "uuid": "e2af4857-c5c8-433d-ba7a-9b2839b4c5d7", "historyId": "e9d8b21a339f9bde40ffec1e871931f0", "testCaseId": "e9d8b21a339f9bde40ffec1e871931f0", "fullName": "tests.test_external_calls#test_process_cdr_file_with_only_external_numbers", "labels": [{"name": "story", "value": "Игнорирование CDR между исключительно внешними номерами"}, {"name": "epic", "value": "Обработка CDR в BRT"}, {"name": "severity", "value": "normal"}, {"name": "feature", "value": "Бизнес-логика - Обработка вызовов"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_external_calls"}, {"name": "host", "value": "imenov"}, {"name": "thread", "value": "32580-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_external_calls"}]}