{"name": "Тест: BRT отклоняет CDR с невалидными значениями callType", "status": "passed", "description": "Проверяет, что BRT-сервис НЕ сохраняет CDR в 'cdr_record', если CDR имеет невалидный 'callType'. Используется файл: test_data/invalid_call_types.jsonl. Ожидается 0 записей в БД.", "steps": [{"name": "1. Подготовка БД: создание/проверка абонентов ['79123456789', '79996667755', '79334455667'] и очистка cdr_record", "status": "passed", "attachments": [{"name": "ID подготовленных/проверенных абонентов", "source": "db979e82-1141-4df9-9b7f-95494a26c097-attachment.json", "type": "application/json"}], "start": 1746967605029, "stop": 1746967605051}, {"name": "2. Чтение CDR с невалидными callType из файла: test_data/invalid_call_types.jsonl", "status": "passed", "attachments": [{"name": "Содержимое файла test_data/invalid_call_types.jsonl (с невалидными callType)", "source": "a79b8cf4-b1d3-43ff-98e9-05cb2b0a351a-attachment.json", "type": "application/json"}], "start": 1746967605051, "stop": 1746967605053}, {"name": "3. Отправка 4 CDR (с невалидным callType) в RabbitMQ", "status": "passed", "attachments": [{"name": "CDRы (с невалидным callType), отправленные в RabbitMQ", "source": "f8d9a6b1-c689-49c7-b81e-c632e91e0f6c-attachment.json", "type": "application/json"}], "start": 1746967605054, "stop": 1746967605068}, {"name": "4. Ожидание 5 сек. для обработки CDR сервисом BRT", "status": "passed", "start": 1746967605068, "stop": 1746967610070}, {"name": "5. Проверка отсутствия записей в таблице cdr_record (ожидается: 0)", "status": "passed", "attachments": [{"name": "Сводка по записям в БД", "source": "9325eef5-3cca-461d-af2a-ab5398c456e6-attachment.txt", "type": "text/plain"}], "start": 1746967610070, "stop": 1746967610078}], "attachments": [{"name": "Ожидаемое количество записей в БД после обработки", "source": "ceb8922f-775f-4436-be15-295c14c77f59-attachment.txt", "type": "text/plain"}, {"name": "log", "source": "ecbc3f1d-df88-4882-8511-946cd09bc6fd-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "857fc54f-8734-410e-bfa5-c742d178f418-attachment.txt", "type": "text/plain"}], "start": 1746967605029, "stop": 1746967610079, "uuid": "6c31e6eb-3c74-4e7b-be3e-12705957fbba", "historyId": "098a842cfef92df2991cc6cf13c8a532", "testCaseId": "098a842cfef92df2991cc6cf13c8a532", "fullName": "tests.test_invalid_call_type#test_brt_rejects_cdr_with_invalid_call_type", "labels": [{"name": "severity", "value": "critical"}, {"name": "feature", "value": "Негативные сценарии - Валидация данных"}, {"name": "epic", "value": "Обработка CDR в BRT"}, {"name": "story", "value": "Отклонение CDR с невалидным callType"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_invalid_call_type"}, {"name": "host", "value": "imenov"}, {"name": "thread", "value": "32580-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_invalid_call_type"}]}