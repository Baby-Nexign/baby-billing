{"name": "Проверка частичного списания из пакета и деньгами (ТП 'Помесячный', внутрисеть)", "status": "passed", "description": "\n    Тест проверяет сценарий, когда абонент с 'Помесячным' тарифом совершает исходящий внутрисетевой звонок,\n    длительность которого превышает остаток минут в пакете.\n    Ожидаемое поведение:\n    1. Имеющиеся пакетные минуты списываются полностью.\n    2. Оставшаяся часть длительности звонка тарифицируется с денежного баланса по соответствующему тарифу.\n    3. Баланс принимающего абонента (если он внутрисетевой) не изменяется.\n    Шаги:\n    1. Создание/обновление данных звонящего (P2, Помесячный) и принимающего (P1, Классика) абонентов.\n    2. Отправка CDR о звонке в RabbitMQ.\n    3. Расчет общей длительности звонка, минут из пакета, минут сверх пакета и стоимости минут сверх пакета.\n    4. Проверка полного списания пакетных минут у звонящего (P2).\n    5. Проверка корректного списания средств с денежного баланса звонящего (P2).\n    6. Проверка неизменности баланса принимающего абонента (P1).\n", "steps": [{"name": "1. Подготовка данных абонентов (P2 - Помесячный, P1 - Классика)", "status": "passed", "attachments": [{"name": "Данные абонента P2 (звонящий, вход)", "source": "4b6e38c6-bcdf-4955-b8ef-3377c28ddbed-attachment.json", "type": "application/json"}, {"name": "Данные абонента P1 (принимающий, вход)", "source": "3a9ab089-ccf8-4c53-98fa-56e7315e4245-attachment.json", "type": "application/json"}, {"name": "ID созданного/обновленного абонента P2", "source": "134c14f6-0d97-4e4e-8a76-eba34bbaff41-attachment.txt", "type": "text/plain"}], "start": 1746919841012, "stop": 1746919841060}, {"name": "2. Отправка CDR: 79221234567 -> 79340001122, Начало: 2025-05-01T14:00:00, Конец: 2025-05-01T14:04:59", "status": "passed", "attachments": [{"name": "Отправляемый CDR", "source": "ac5d4f23-0d26-479e-b223-94ec7aea45e4-attachment.json", "type": "application/json"}], "start": 1746919841061, "stop": 1746919841084}, {"name": "3. Расчеты: общая длительность, минуты из пакета, минуты сверх пакета, стоимость сверх пакета", "status": "passed", "attachments": [{"name": "Общая длительность", "source": "bde0e2cb-9a01-4b75-828e-0836da63348a-attachment.txt", "type": "text/plain"}, {"name": "Минуты из пакета", "source": "816b0787-45f4-4b33-9962-d0edb3cca305-attachment.txt", "type": "text/plain"}, {"name": "Минуты сверх пакета", "source": "80052f2f-32fc-4960-9ecf-fd1e713b4567-attachment.txt", "type": "text/plain"}, {"name": "Стоимость минут сверх пакета", "source": "1163cfaa-e66c-4cd5-b907-594f3276f274-attachment.txt", "type": "text/plain"}], "start": 1746919841085, "stop": 1746919841087}, {"name": "Пауза 7 сек. для обработки биллинга", "status": "passed", "start": 1746919841087, "stop": 1746919849392}, {"name": "4. Проверка пакетных минут у звонящего абонента P2 (79221234567)", "status": "passed", "attachments": [{"name": "Детали пакетных минут P2 (79221234567)", "source": "baa138bd-287b-4397-86b5-81ed333f9248-attachment.txt", "type": "text/plain"}], "start": 1746919849393, "stop": 1746919849394}, {"name": "5. Проверка денежного баланса у звонящего абонента P2 (79221234567)", "status": "passed", "attachments": [{"name": "Детали денежного баланса P2 (79221234567)", "source": "a8877c80-fc2c-418a-b808-1e58dae6f5d4-attachment.txt", "type": "text/plain"}], "start": 1746919849394, "stop": 1746919849395}, {"name": "6. Проверка баланса принимающего абонента P1 (79340001122) - не должен измениться", "status": "passed", "attachments": [{"name": "Детали баланса P1 (79340001122)", "source": "8815b7b8-8e49-4a92-82e0-bf305878e8e2-attachment.txt", "type": "text/plain"}], "start": 1746919849395, "stop": 1746919849396}], "attachments": [{"name": "log", "source": "bfa31a6a-a6ea-48a9-9b58-9caa90cbb811-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "31e852d4-1501-47da-9cfa-9ca2deb21653-attachment.txt", "type": "text/plain"}], "start": 1746919841012, "stop": 1746919849396, "uuid": "fd5e608c-3bf1-4499-ab6e-3a032758f084", "historyId": "64dfe4dfe837e88f8faf0979a9a39c35", "testCaseId": "64dfe4dfe837e88f8faf0979a9a39c35", "fullName": "tests.test_e2e_monthly_02#test_e2e_monthly_02_partial_package_deduction_and_billing", "labels": [{"name": "story", "value": "E2E-MONTHLY-02: Частичное списание из пакета, остаток деньгами (внутрисеть)"}, {"name": "severity", "value": "critical"}, {"name": "feature", "value": "Тариф 'Помесячный'"}, {"name": "epic", "value": "Биллинг"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_e2e_monthly_02"}, {"name": "host", "value": "imenov"}, {"name": "thread", "value": "330609-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_e2e_monthly_02"}]}