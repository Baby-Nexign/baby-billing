{"uid":"e504041e024dec1e","name":"Проверка списания средств при внутрисетевом звонке на тарифе 'Классика'","fullName":"tests.test_e2e_classic_01#test_e2e_classic_01","historyId":"5b6655674052fb4cdb7bdce82a6ada02","time":{"start":1746919820689,"stop":1746919825722,"duration":5033},"description":"\n    Тест проверяет корректность списания средств у звонящего абонента\n    и неизменность баланса у принимающего абонента при внутрисетевом звонке\n    на тарифном плане 'Классика'.\n    Шаги:\n    1. Создание/обновление данных звонящего и принимающего абонентов.\n    2. Отправка CDR о звонке в RabbitMQ.\n    3. Расчет ожидаемой стоимости звонка.\n    4. Проверка баланса звонящего абонента после биллинга.\n    5. Проверка баланса принимающего абонента (не должен измениться).\n","descriptionHtml":"<pre><code>Тест проверяет корректность списания средств у звонящего абонента\nи неизменность баланса у принимающего абонента при внутрисетевом звонке\nна тарифном плане 'Классика'.\nШаги:\n1. Создание/обновление данных звонящего и принимающего абонентов.\n2. Отправка CDR о звонке в RabbitMQ.\n3. Расчет ожидаемой стоимости звонка.\n4. Проверка баланса звонящего абонента после биллинга.\n5. Проверка баланса принимающего абонента (не должен измениться).\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"reset_sequences_after_migrations","time":{"start":1746919820654,"stop":1746919820676,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"db_connection","time":{"start":1746919820676,"stop":1746919820688,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    Тест проверяет корректность списания средств у звонящего абонента\n    и неизменность баланса у принимающего абонента при внутрисетевом звонке\n    на тарифном плане 'Классика'.\n    Шаги:\n    1. Создание/обновление данных звонящего и принимающего абонентов.\n    2. Отправка CDR о звонке в RabbitMQ.\n    3. Расчет ожидаемой стоимости звонка.\n    4. Проверка баланса звонящего абонента после биллинга.\n    5. Проверка баланса принимающего абонента (не должен измениться).\n","status":"passed","steps":[{"name":"1. Подготовка данных абонентов (звонящий и принимающий)","time":{"start":1746919820689,"stop":1746919820701,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"41110b69ba7a58b7","name":"Данные звонящего абонента (вход)","source":"41110b69ba7a58b7.json","type":"application/json","size":203},{"uid":"cd28f029d949b1e0","name":"Данные принимающего абонента (вход)","source":"cd28f029d949b1e0.json","type":"application/json","size":203}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"2. Отправка CDR: 79111111111 -> 79333333333, Начало: 2025-05-01T10:00:00, Конец: 2025-05-01T10:03:45","time":{"start":1746919820701,"stop":1746919820711,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"6d2ac1d0db18a3b6","name":"Отправляемый CDR","source":"6d2ac1d0db18a3b6.json","type":"application/json","size":171}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"3. Расчет ожидаемой стоимости звонка","time":{"start":1746919820711,"stop":1746919820712,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"a368d4cf02a8f855","name":"Расчет минут","source":"a368d4cf02a8f855.txt","type":"text/plain","size":57},{"uid":"b3c821f35f3ce7ab","name":"Расчет стоимости","source":"b3c821f35f3ce7ab.txt","type":"text/plain","size":113}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Пауза 5 сек. для обработки биллинга","time":{"start":1746919820712,"stop":1746919825712,"duration":5000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"4. Проверка баланса звонящего абонента (79111111111)","time":{"start":1746919825712,"stop":1746919825717,"duration":5},"status":"passed","steps":[],"attachments":[{"uid":"d3098b56de3739b3","name":"Детали баланса 79111111111","source":"d3098b56de3739b3.txt","type":"text/plain","size":124}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"5. Проверка баланса принимающего абонента (79333333333)","time":{"start":1746919825717,"stop":1746919825720,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"81c903c35f0162f5","name":"Детали баланса 79333333333","source":"81c903c35f0162f5.txt","type":"text/plain","size":144}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"f4730c1a29506544","name":"log","source":"f4730c1a29506544.txt","type":"text/plain","size":1668},{"uid":"90df8826d16a7b52","name":"stdout","source":"90df8826d16a7b52.txt","type":"text/plain","size":214},{"uid":"c1115b47cffbe187","name":"stderr","source":"c1115b47cffbe187.txt","type":"text/plain","size":1644}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":10,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"db_connection::0","time":{"start":1746919825723,"stop":1746919825725,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Тариф 'Классика'"},{"name":"severity","value":"critical"},{"name":"story","value":"E2E-CLASSIC-01: Внутрисетевой исходящий звонок, корректное списание"},{"name":"epic","value":"Биллинг"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_e2e_classic_01"},{"name":"host","value":"imenov"},{"name":"thread","value":"330609-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_e2e_classic_01"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[],"tags":[]},"source":"e504041e024dec1e.json","parameterValues":[]}